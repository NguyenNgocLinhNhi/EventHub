@model EventManagementSystem.Web.Models.Entities.Event

@{
    ViewData["Title"] = Model.Title;
    Layout = "~/Views/Shared/LayoutLandingPage/_LayoutMedilab.cshtml";
}

<!-- HERO -->
<section id="hero" class="hero section light-background">
    <img src="@(string.IsNullOrEmpty(Model.ImageUrl)
                 ? "/templates/medilab/assets/img/hero-bg.jpg"
                 : Model.ImageUrl)" alt="">

    <div class="container position-relative">
        <div class="welcome position-relative">
            <h2 style="font-size:2.5rem">@Model.Title</h2>

            <p class="text-uppercase" style="letter-spacing:2px">
                @Model.Category?.Name
            </p>

            <p>
                <i class="bi bi-geo-alt-fill"></i> @Model.Location
                |
                <i class="bi bi-calendar-event"></i>
                @Model.StartDate.ToString("dd/MM/yyyy")
            </p>
        </div>

        <div class="content row gy-4">
            <div class="col-lg-4 d-flex align-items-stretch">
                <div class="why-box">
                    <h3>Tại sao nên tham gia?</h3>
                    <p>
                        Sự kiện quy tụ các chuyên gia hàng đầu, mang đến kiến thức
                        cập nhật và cơ hội kết nối giá trị.
                    </p>
                    <div class="text-center">
                        <a href="#about" class="more-btn">
                            <span>Tìm hiểu thêm</span>
                            <i class="bi bi-chevron-right"></i>
                        </a>
                    </div>
                </div>
            </div>

            <div class="col-lg-8 d-flex align-items-stretch">
                <div class="d-flex flex-column justify-content-center">
                    <div class="row gy-4">
                        <div class="col-xl-4">
                            <div class="icon-box">
                                <i class="bi bi-people"></i>
                                <h4>@(Model.Speakers?.Count ?? 0) Diễn Giả</h4>
                                <p>Các chuyên gia uy tín đầu ngành.</p>
                            </div>
                        </div>

                        <div class="col-xl-4">
                            <div class="icon-box">
                                <i class="bi bi-calendar-check"></i>
                                <h4>@(Model.Schedules?.Count ?? 0) Phiên</h4>
                                <p>Nội dung chuyên sâu và thực tế.</p>
                            </div>
                        </div>

                        <div class="col-xl-4">
                            <div class="icon-box">
                                <i class="bi bi-ticket-perforated"></i>
                                <h4>@(Model.TicketTypes?.Sum(t => t.Quantity) ?? 0) Vé</h4>
                                <p>Số lượng có hạn.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ABOUT -->
<section id="about" class="about section">
    <div class="container">
        <div class="row gy-4 gx-5">
            <div class="col-lg-6">
                <img src="/templates/medilab/assets/img/about.jpg"
                     class="img-fluid" alt="">
            </div>

            <div class="col-lg-6 content">
                <h3>Thông Tin Chi Tiết</h3>
                <div style="font-size:1.1rem;line-height:1.8">
                    @Html.Raw(Model.Description)
                </div>
            </div>
        </div>
    </div>
</section>

<!-- SPEAKERS -->
@if (Model.Speakers?.Any() == true)
{
    <section id="doctors" class="doctors section">
        <div class="container section-title">
            <h2>Diễn Giả</h2>
            <p>Gặp gỡ các chuyên gia hàng đầu</p>
        </div>

        <div class="container">
            <div class="row gy-4">
                @foreach (var sp in Model.Speakers)
                {
                    <div class="col-lg-6">
                        <div class="team-member d-flex align-items-start">
                            <div class="pic">
                                <img src="@sp.ImageUrl"
                                     class="img-fluid"
                                     style="width:150px;height:150px;object-fit:cover">
                            </div>
                            <div class="member-info">
                                <h4>@sp.Name</h4>
                                <span>@sp.JobTitle</span>

                                @if (!string.IsNullOrEmpty(sp.SocialUrl))
                                {
                                    <div class="social">
                                        <a href="@sp.SocialUrl" target="_blank">
                                            <i class="bi bi-linkedin"></i>
                                        </a>
                                    </div>
                                }
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </section>
}

<!-- SCHEDULE -->
@if (Model.Schedules?.Any() == true)
{
    <section id="schedule" class="faq section light-background">
        <div class="container section-title">
            <h2>Lịch Trình</h2>
        </div>

        <div class="container">
            <div class="faq-container">
                @foreach (var item in Model.Schedules.OrderBy(s => s.StartTime))
                {
                    <div class="faq-item">
                        <h3>
                            <span class="text-primary me-3">
                                @item.StartTime.ToString("HH:mm")
                            </span>
                            @item.Title
                        </h3>
                        <div class="faq-content">
                            <p>
                                <strong>Địa điểm:</strong> @item.Location <br />
                                @item.Description
                            </p>
                        </div>
                        <i class="faq-toggle bi bi-chevron-right"></i>
                    </div>
                }
            </div>
        </div>
    </section>
}

<!-- REGISTER -->
<section id="appointment" class="appointment section">
    <div class="container section-title">
        <h2>Đăng Ký</h2>
        <p>Giữ chỗ ngay hôm nay</p>
    </div>

    <div class="container">
        @if (User.Identity?.IsAuthenticated == true)
        {
            <form>
                <div class="row">
                    <div class="col-md-4">
                        <input class="form-control"
                               value="@User.Identity.Name"
                               readonly />
                    </div>

                    <div class="col-md-4">
                        <select class="form-select">
                            <option disabled selected>Chọn hạng vé</option>
                            @foreach (var t in Model.TicketTypes ?? Enumerable.Empty<EventManagementSystem.Web.Models.Entities.TicketType>())
                            {
                                <option value="@t.Id">
                                    @t.Name - @t.Price.ToString("N0")đ
                                </option>
                            }
                        </select>
                    </div>
                </div>

                <div class="mt-3 text-center">
                    <button type="button" class="btn btn-primary">
                        Xác Nhận Đăng Ký
                    </button>
                </div>
            </form>
        }
        else
        {
            <div class="text-center p-5 border rounded bg-light">
                <h4>Bạn cần đăng nhập</h4>

                <a asp-controller="Account"
                   asp-action="Login"
                   asp-route-returnUrl="@Context.Request.Path"
                   class="btn btn-primary rounded-pill px-5">
                    Đăng Nhập
                </a>
            </div>
        }
    </div>
</section>
