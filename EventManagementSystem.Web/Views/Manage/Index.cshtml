@using EventManagementSystem.Web.ViewModels
@model IndexViewModel
@{
    ViewData["Title"] = "Thông tin tài khoản";
}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

<style>
    /* Header nền gradient xanh tối đồng bộ dự án */
    .bg-profile-header { 
        background: linear-gradient(135deg, #0f2027, #203a43, #2c5364); 
        color: white !important; 
        padding: 50px 0 90px 0; 
    }
    
    /* Thẻ profile đè lên header một chút tạo chiều sâu */
    .profile-card { 
        border: none; 
        border-radius: 1.5rem; 
        box-shadow: 0 1rem 3rem rgba(0,0,0,0.175); 
        margin-top: -70px; 
        background: white; 
        overflow: hidden;
    }

    /* Vòng tròn Avatar đại diện */
    .avatar-circle { 
        width: 100px; 
        height: 100px; 
        background: #f8f9fa; 
        color: #006D5B; 
        border-radius: 50%; 
        display: flex; 
        align-items: center; 
        justify-content: center; 
        font-size: 3rem; 
        border: 4px solid white; 
        margin: 0 auto;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    /* Các ô thông tin chi tiết */
    .info-box { 
        background: #fdfdfd; 
        border: 1px solid #f1f1f1;
        border-radius: 1rem; 
        padding: 1.25rem; 
        height: 100%;
        transition: all 0.3s ease;
    }
    
    .info-box:hover {
        border-color: #006D5B;
        background: #fff;
    }

    .label-custom {
        font-size: 0.75rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 1px;
        color: #006D5B;
        margin-bottom: 5px;
    }

    .value-custom {
        font-size: 1.05rem;
        font-weight: 500;
        color: #333;
    }

    /* Nút đổi mật khẩu */
    .btn-security {
        background-color: #212529;
        color: white;
        border-radius: 50px;
        padding: 10px 25px;
        font-weight: 600;
        border: none;
        transition: all 0.3s;
    }

    .btn-security:hover {
        background-color: #000;
        transform: translateY(-2px);
        color: white;
    }

    .btn-edit-main {
        background-color: #006D5B;
        color: white;
        border-radius: 50px;
        padding: 8px 25px;
        transition: all 0.3s;
    }

    .btn-edit-main:hover {
        background-color: #004d40;
        color: white;
        box-shadow: 0 4px 12px rgba(0, 109, 91, 0.3);
    }
</style>

<div class="bg-profile-header text-center">
    <div class="container">
        <h2 class="fw-bold text-white mb-2">Hồ sơ cá nhân</h2>
        <p class="text-white-50">Quản lý thông tin và bảo mật tài khoản của bạn</p>
    </div>
</div>

<div class="container mb-5">
    <div class="row justify-content-center">
        <div class="col-lg-9 col-xl-8">
            <div class="card profile-card p-4 p-md-5">
                
                @if (TempData["StatusMessage"] != null)
                {
                    <div class="alert alert-success alert-dismissible fade show border-0 shadow-sm mb-4" role="alert">
                        <i class="fa-solid fa-circle-check me-2"></i> @TempData["StatusMessage"]
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                }

                <div class="text-center mb-5">
                    <div class="avatar-circle mb-3">
                        <i class="fas fa-user-shield"></i>
                    </div>
                    <h3 class="fw-bold mb-1">@(Model.FullName ?? "Thành viên")</h3>
                    <p class="text-muted small">@Model.Email</p>
                    <a asp-action="EditProfile" class="btn btn-edit-main shadow-sm">
                        <i class="fas fa-edit me-2"></i>Chỉnh sửa hồ sơ
                    </a>
                </div>

                <div class="row g-4">
                    <div class="col-md-6">
                        <div class="info-box">
                            <div class="label-custom">Địa chỉ Email</div>
                            <div class="value-custom">@Model.Email</div>
                            <div class="mt-2">
                                <span class="badge bg-success-soft text-success border border-success px-2 py-1" style="font-size: 0.7rem;">
                                    <i class="fas fa-check-circle me-1"></i> Đã xác minh
                                </span>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="info-box d-flex justify-content-between align-items-start">
                            <div>
                                <div class="label-custom">Số điện thoại</div>
                                <div class="value-custom">@(Model.PhoneNumber ?? "Chưa cập nhật")</div>
                            </div>
                            <i class="fas fa-phone-alt text-muted"></i>
                        </div>
                    </div>

                    <div class="col-12">
                        <div class="info-box d-flex flex-column flex-md-row justify-content-between align-items-md-center">
                            <div class="mb-3 mb-md-0">
                                <div class="label-custom">Mật khẩu & Bảo mật</div>
                                <div class="text-muted small">Cập nhật mật khẩu định kỳ để bảo vệ tài khoản của bạn</div>
                            </div>
                            <div class="d-flex gap-2">
                                <a asp-action="ChangePassword" class="btn btn-security shadow-sm">
                                    <i class="fas fa-key me-2"></i> Đổi mật khẩu
                                </a>
                                @if (Model.Logins?.Count > 0)
                                {
                                    <a asp-action="ManageLogins" class="btn btn-outline-secondary rounded-pill px-4">
                                        Liên kết MXH
                                    </a>
                                }
                            </div>
                        </div>
                    </div>
                </div>

                <div class="text-center mt-5">
                    <a href="/" class="text-decoration-none text-muted small">
                        <i class="fas fa-arrow-left me-1"></i> Quay lại trang chủ
                    </a>
                </div>

            </div>
        </div>
    </div>
</div>